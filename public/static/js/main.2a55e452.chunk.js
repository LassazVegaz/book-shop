(this["webpackJsonpreact-lap"]=this["webpackJsonpreact-lap"]||[]).push([[0],{55:function(e,t,n){e.exports=n(91)},79:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),c=n.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=n(15),u=n.n(l),i=n(24),s=n(5),m=n(8),p=n(95),h=n(49),f=n(93),d=n(97),E=n(96),b=n(9),v=n.n(b),k=n(17),g=n(47),y=n(48),w=function(){function e(){Object(g.a)(this,e)}return Object(y.a)(e,null,[{key:"handleAPIError",value:function(t){var n;if(e.isAxiosError(t)){if(console.log(t.response),401===(null===(n=t.response)||void 0===n?void 0:n.status))throw new Error("401")}else console.log("error is not axios");throw t}}]),e}();w.isFirstRun=!0,w.initialize=Object(k.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w.isFirstRun){e.next=6;break}return u.a.defaults.withCredentials=!0,u.a.defaults.headers.common.Accept="application/json",e.next=5,w.getAuth();case 5:w.isFirstRun=!1;case 6:case"end":return e.stop()}}),e)}))),w.getAuth=Object(k.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("http://localhost:8000/sanctum/csrf-cookie");case 2:case"end":return e.stop()}}),e)}))),w.isAxiosError=function(e){return"boolean"===typeof e.isAxiosError},w.LogIn=function(){var e=Object(k.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.initialize();case 3:return e.next=5,u.a.post("http://localhost:8000/api/users/login",t);case 5:return n=e.sent,e.abrupt("return",n.data.success);case 9:e.prev=9,e.t0=e.catch(0),w.handleAPIError(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),w.LogOut=Object(k.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post("http://localhost:8000/api/users/current/logout");case 3:return t=e.sent,e.abrupt("return",t.data.success);case 7:e.prev=7,e.t0=e.catch(0),w.handleAPIError(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),w.GetBooks=function(){var e=Object(k.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.get(t?"http://localhost:8000/api/users/current/books":"http://localhost:8000/api/books/available");case 3:return n=e.sent,e.abrupt("return",n.data.result.books);case 7:e.prev=7,e.t0=e.catch(0),w.handleAPIError(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),w.BuyOrRemoveBook=function(){var e=Object(k.a)(v.a.mark((function e(t,n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.post(t?"http://localhost:8000/api/users/current/books/buy":"http://localhost:8000/api/users/current/books/remove",{book_id:n});case 3:return a=e.sent,e.abrupt("return",a.data.success);case 7:e.prev=7,e.t0=e.catch(0),w.handleAPIError(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();var x=w,O=(n(79),function(e){var t=a.useState("Title"),n=Object(m.a)(t,2),r=n[0],o=n[1],c=a.useState(""),l=Object(m.a)(c,2),u=l[0],i=l[1];return a.createElement(p.a,{inline:!0,className:"search-area"},a.createElement(p.a.Label,null,"Search By"),a.createElement(p.a.Control,{as:"select",onChange:function(e){return o(e.target.value)},value:r},a.createElement("option",null,"Title"),a.createElement("option",null,"Description"),a.createElement("option",null,"Genre")),a.createElement(h.a,{type:"text",placeholder:"Search",className:"mr-sm-2 search-box",value:u,onChange:function(t){i(t.target.value),e.onSearch(r,u)}}),a.createElement(f.a,{variant:"outline-dark"},"Search"))}),C=function(e){var t=a.useState(!1),n=Object(m.a)(t,2),r=n[0],o=n[1];return a.createElement(a.Fragment,null,a.createElement("div",{className:"books-header"},a.createElement(d.a,{bg:"primary",variant:"dark",expand:"lg",fixed:"top"},a.createElement(d.a.Toggle,{"aria-controls":"navigator"}),a.createElement(d.a.Collapse,{id:"navigator"},a.createElement(E.a,{className:"mr-auto"},a.createElement(E.a.Link,{as:i.b,to:"/books/buy",active:!e.myBooksLink},"Available Books"),a.createElement(E.a.Link,{as:i.b,to:"/books/mylist",active:e.myBooksLink},"My Books"),a.createElement(E.a.Link,{onClick:function(t){e.onLoading(!0),t.preventDefault(),x.LogOut().then((function(){return o(!0)})).catch((function(){return e.onError("Check your internet connection")})).finally((function(){return e.onLoading(!1)}))}},"Log Out")),a.createElement(O,{onSearch:e.onSearch})))),r?a.createElement(s.a,{to:"/"}):null)},j=n(53),S=(n(86),function(e){return a.createElement("div",{className:"loading-screen-container",style:{display:e.show?"block":"none"}},a.createElement(j.a,{active:e.show,spinner:!0,text:"loading"},a.createElement("div",{className:"loading-screen-content"})))}),L=n(94),B=function(e){var t="Order",n="outline-primary";return e.isMyBook&&(t="Remove",n="outline-danger"),r.a.createElement("tr",null,r.a.createElement("td",null,e.book.id),r.a.createElement("td",null,e.book.title),r.a.createElement("td",null,e.book.description),r.a.createElement("td",null,e.book.genre),r.a.createElement("td",null,e.book.price.toFixed(2)),r.a.createElement("td",{className:"button-container"},r.a.createElement(f.a,{variant:n,onClick:function(){return e.onChange(e.book.id)}},t)))},I=function(e){return r.a.createElement("div",{className:"table-area"},r.a.createElement(L.a,{striped:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Genre"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null))),r.a.createElement("tbody",null,e.books.map((function(t){return r.a.createElement(B,{isMyBook:e.isMyBooksSet,book:t,key:t.id,onChange:e.onChange})})))))},N=n(98),A=function(e){return a.createElement(a.Fragment,null,""!==e.error?a.createElement(N.a,{variant:"danger",dismissible:!0,onClose:e.onClose},e.error):null)},F=(n(87),function(){var e=a.useState(!0),t=Object(m.a)(e,2),n=t[0],r=t[1],o=a.useState(!0),c=Object(m.a)(o,2),l=c[0],u=c[1],i=a.useState([]),p=Object(m.a)(i,2),h=p[0],f=p[1],d=a.useState(""),E=Object(m.a)(d,2),b=E[0],v=E[1],k=a.useState([]),g=Object(m.a)(k,2),y=g[0],w=g[1],O=Object(s.g)(),j=Object(s.h)().booksType;"buy"!==j&&"mylist"!==j&&O.replace("/404");var L="mylist"===j;return a.useEffect((function(){r(!0);var e=!1;return x.GetBooks(L).then((function(t){e||f(t)})).catch((function(t){e||("401"===t.message?u(!1):v("Check your internet connection"))})).finally((function(){return e?null:r(!1)})),function(){e=!0}}),[L]),a.createElement(a.Fragment,null,a.createElement("div",{className:"books-page"},a.createElement(C,{myBooksLink:L,onLoading:function(e){return r(e)},onError:function(e){return v(e)},onSearch:function(e,t){if(""===t)w([]);else{var n=h.filter((function(n){return n[e.toLowerCase()].toLocaleLowerCase().includes(t.toLocaleLowerCase())}));w(n)}}}),a.createElement(I,{isMyBooksSet:L,books:0===y.length?h:y,onChange:function(e){r(!0),x.BuyOrRemoveBook(!L,e).then((function(){var t=h.slice(),n=t.findIndex((function(t){return t.id===e}));t.splice(n,1)})).catch((function(){return v("Check your internet connection")})).finally((function(){return r(!1)}))}})),a.createElement(S,{show:n}),a.createElement(A,{error:b,onClose:function(){return v("")}}),l?null:a.createElement(s.a,{to:"/"}))}),P=function(){return a.createElement("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}},a.createElement("img",{src:"./images/404.png",alt:"404-page-not-found"}))},R=(n(88),function(e){return a.createElement("div",{className:"input-field"},a.createElement("input",{type:e.type,placeholder:e.placeholder,onChange:function(t){return e.onChange(t.target.value)}}))}),M=function(){var e=a.useState(""),t=Object(m.a)(e,2),n=t[0],r=t[1],o=a.useState(""),c=Object(m.a)(o,2),l=c[0],u=c[1],i=a.useState(!1),p=Object(m.a)(i,2),h=p[0],f=p[1],d=a.useState(""),E=Object(m.a)(d,2),b=E[0],g=E[1],y=a.useState(!1),w=Object(m.a)(y,2),O=w[0],C=w[1],j=function(){var e=Object(k.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(!0),x.LogIn({email:n,password:l}).then((function(e){e?C(!0):g("Invalid credentials")})).catch((function(){return g("Check your internet connection")})).finally((function(){return f(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.createElement(a.Fragment,null,a.createElement("div",{className:"signin-page"},a.createElement("h1",null,"Sign In to Continue"),a.createElement("form",null,a.createElement(R,{type:"text",placeholder:"User Name",onChange:function(e){return r(e)}}),a.createElement(R,{type:"password",placeholder:"Password",onChange:function(e){return u(e)}}),a.createElement("button",{onClick:j,disabled:h,className:"signin-button"},"Sign In"))),a.createElement(S,{show:h}),a.createElement(A,{error:b,onClose:function(){return g("")}}),O?a.createElement(s.a,{to:"/books/buy"}):null)};var T=function(){return Object(a.useEffect)((function(){u.a.defaults.baseURL="http://localhost:8000/api/"})),r.a.createElement(i.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/"},r.a.createElement(M,null)),r.a.createElement(s.b,{exact:!0,path:"/books/:booksType"},r.a.createElement(F,null)),r.a.createElement(s.b,{exact:!0,path:"*"},r.a.createElement(P,null))))};n(89),n(90);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.2a55e452.chunk.js.map